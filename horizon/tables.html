<!doctype HTML>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="codemirror.js"></script>
<script src="runmode.js"></script>
<script src="pyret.js"></script>
<script src="hilite.js"></script>
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>3.22&nbsp;Tables</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="codemirror.css" title="default"/><link rel="stylesheet" type="text/css" href="pyret.css" title="default"/><link rel="stylesheet" type="text/css" href="styles.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Pyret</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Getting_Started.html" class="tocviewlink" data-pltdoc="x">Getting Started</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Language_Concepts.html" class="tocviewlink" data-pltdoc="x">Language Concepts</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Builtins_and_Libraries.html" class="tocviewselflink" data-pltdoc="x">Builtins and Libraries</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Internals.html" class="tocviewlink" data-pltdoc="x">Internals</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>3&nbsp;</td><td><a href="Builtins_and_Libraries.html" class="tocviewlink" data-pltdoc="x">Builtins and Libraries</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="_global_.html" class="tocviewlink" data-pltdoc="x">Global Utilities</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="numbers.html" class="tocviewlink" data-pltdoc="x">Numbers</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="strings.html" class="tocviewlink" data-pltdoc="x">Strings</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="booleans.html" class="tocviewlink" data-pltdoc="x">Booleans</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="raw-arrays.html" class="tocviewlink" data-pltdoc="x">Raw<span class="mywbr"> &nbsp;</span>Array</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="lists.html" class="tocviewlink" data-pltdoc="x">lists</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="sets.html" class="tocviewlink" data-pltdoc="x">sets</a></td></tr><tr><td align="right">3.8&nbsp;</td><td><a href="arrays.html" class="tocviewlink" data-pltdoc="x">arrays</a></td></tr><tr><td align="right">3.9&nbsp;</td><td><a href="string-dict.html" class="tocviewlink" data-pltdoc="x">string-<wbr></wbr>dict</a></td></tr><tr><td align="right">3.10&nbsp;</td><td><a href="option.html" class="tocviewlink" data-pltdoc="x">option</a></td></tr><tr><td align="right">3.11&nbsp;</td><td><a href="pick.html" class="tocviewlink" data-pltdoc="x">pick</a></td></tr><tr><td align="right">3.12&nbsp;</td><td><a href="either.html" class="tocviewlink" data-pltdoc="x">either</a></td></tr><tr><td align="right">3.13&nbsp;</td><td><a href="srcloc.html" class="tocviewlink" data-pltdoc="x">srcloc</a></td></tr><tr><td align="right">3.14&nbsp;</td><td><a href="pprint.html" class="tocviewlink" data-pltdoc="x">pprint</a></td></tr><tr><td align="right">3.15&nbsp;</td><td><a href="s-exp.html" class="tocviewlink" data-pltdoc="x">s-<wbr></wbr>exp</a></td></tr><tr><td align="right">3.16&nbsp;</td><td><a href="s-exp-structs.html" class="tocviewlink" data-pltdoc="x">s-<wbr></wbr>exp-<wbr></wbr>structs</a></td></tr><tr><td align="right">3.17&nbsp;</td><td><a href="image-structs.html" class="tocviewlink" data-pltdoc="x">image-<wbr></wbr>structs</a></td></tr><tr><td align="right">3.18&nbsp;</td><td><a href="image.html" class="tocviewlink" data-pltdoc="x">image</a></td></tr><tr><td align="right">3.19&nbsp;</td><td><a href="world.html" class="tocviewlink" data-pltdoc="x">world</a></td></tr><tr><td align="right">3.20&nbsp;</td><td><a href="reactors.html" class="tocviewlink" data-pltdoc="x">reactors</a></td></tr><tr><td align="right">3.21&nbsp;</td><td><a href="plot.html" class="tocviewlink" data-pltdoc="x">plot</a></td></tr><tr><td align="right">3.22&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Tables</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>3.22&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Tables</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.22.1&nbsp;</td><td><a href="#%28part._s~3atables%29" class="tocviewlink" data-pltdoc="x">Creating Tables</a></td></tr><tr><td align="right">3.22.2&nbsp;</td><td><a href="#%28part._s~3atables~3aloading%29" class="tocviewlink" data-pltdoc="x">Loading Tables</a></td></tr><tr><td align="right">3.22.3&nbsp;</td><td><a href="#%28part._s~3atables~3aselect%29" class="tocviewlink" data-pltdoc="x">Selecting Columns</a></td></tr><tr><td align="right">3.22.4&nbsp;</td><td><a href="#%28part._.Filtering_.Tables%29" class="tocviewlink" data-pltdoc="x">Filtering Tables</a></td></tr><tr><td align="right">3.22.5&nbsp;</td><td><a href="#%28part._.Ordering_.Tables%29" class="tocviewlink" data-pltdoc="x">Ordering Tables</a></td></tr><tr><td align="right">3.22.6&nbsp;</td><td><a href="#%28part._.Transforming_.Tables%29" class="tocviewlink" data-pltdoc="x">Transforming Tables</a></td></tr><tr><td align="right">3.22.7&nbsp;</td><td><a href="#%28part._.Extracting_.Columns_from_.Tables%29" class="tocviewlink" data-pltdoc="x">Extracting Columns from Tables</a></td></tr><tr><td align="right">3.22.8&nbsp;</td><td><a href="#%28part._.Extending_.Tables%29" class="tocviewlink" data-pltdoc="x">Extending Tables</a></td></tr><tr><td align="right">3.22.9&nbsp;</td><td><a href="#%28part._s~3atables~3acomparing%29" class="tocviewlink" data-pltdoc="x">Comparing Tables</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.22.1<tt>&nbsp;</tt></span><a href="#%28part._s~3atables%29" class="tocsubseclink" data-pltdoc="x">Creating Tables</a></td></tr><tr><td><span class="tocsublinknumber">3.22.2<tt>&nbsp;</tt></span><a href="#%28part._s~3atables~3aloading%29" class="tocsubseclink" data-pltdoc="x">Loading Tables</a></td></tr><tr><td><span class="tocsublinknumber">3.22.3<tt>&nbsp;</tt></span><a href="#%28part._s~3atables~3aselect%29" class="tocsubseclink" data-pltdoc="x">Selecting Columns</a></td></tr><tr><td><span class="tocsublinknumber">3.22.4<tt>&nbsp;</tt></span><a href="#%28part._.Filtering_.Tables%29" class="tocsubseclink" data-pltdoc="x">Filtering Tables</a></td></tr><tr><td><span class="tocsublinknumber">3.22.5<tt>&nbsp;</tt></span><a href="#%28part._.Ordering_.Tables%29" class="tocsubseclink" data-pltdoc="x">Ordering Tables</a></td></tr><tr><td><span class="tocsublinknumber">3.22.6<tt>&nbsp;</tt></span><a href="#%28part._.Transforming_.Tables%29" class="tocsubseclink" data-pltdoc="x">Transforming Tables</a></td></tr><tr><td><span class="tocsublinknumber">3.22.7<tt>&nbsp;</tt></span><a href="#%28part._.Extracting_.Columns_from_.Tables%29" class="tocsubseclink" data-pltdoc="x">Extracting Columns from Tables</a></td></tr><tr><td><span class="tocsublinknumber">3.22.8<tt>&nbsp;</tt></span><a href="#%28part._.Extending_.Tables%29" class="tocsubseclink" data-pltdoc="x">Extending Tables</a></td></tr><tr><td><a href="#%28part._tables_.Reducer%29" class="tocsubnonseclink" data-pltdoc="x"><span class="stt">Reducer</span></a></td></tr><tr><td><a href="#%28part._tables_.Reducer_one%29" class="tocsubnonseclink" data-pltdoc="x"><span class="stt">.one</span></a></td></tr><tr><td><a href="#%28part._tables_.Reducer_reduce%29" class="tocsubnonseclink" data-pltdoc="x"><span class="stt">.reduce</span></a></td></tr><tr><td><span class="tocsublinknumber">3.22.8.1<tt>&nbsp;</tt></span><a href="#%28part._.Reducers%29" class="tocsubseclink" data-pltdoc="x">Reducers</a></td></tr><tr><td><a href="#%28part._tables_running-mean%29" class="tocsubnonseclink" data-pltdoc="x"><span class="stt">running-<wbr></wbr>mean</span></a></td></tr><tr><td><a href="#%28part._tables_difference-from%29" class="tocsubnonseclink" data-pltdoc="x"><span class="stt">difference-<wbr></wbr>from</span></a></td></tr><tr><td><a href="#%28part._tables_running-fold%29" class="tocsubnonseclink" data-pltdoc="x"><span class="stt">running-<wbr></wbr>fold</span></a></td></tr><tr><td><a href="#%28part._tables_difference%29" class="tocsubnonseclink" data-pltdoc="x"><span class="stt">difference</span></a></td></tr><tr><td><a href="#%28part._tables_running-max%29" class="tocsubnonseclink" data-pltdoc="x"><span class="stt">running-<wbr></wbr>max</span></a></td></tr><tr><td><a href="#%28part._tables_running-min%29" class="tocsubnonseclink" data-pltdoc="x"><span class="stt">running-<wbr></wbr>min</span></a></td></tr><tr><td><a href="#%28part._tables_running-sum%29" class="tocsubnonseclink" data-pltdoc="x"><span class="stt">running-<wbr></wbr>sum</span></a></td></tr><tr><td><span class="tocsublinknumber">3.22.9<tt>&nbsp;</tt></span><a href="#%28part._s~3atables~3acomparing%29" class="tocsubseclink" data-pltdoc="x">Comparing Tables</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="plot.html" title="backward to &quot;3.21 plot&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Builtins_and_Libraries.html" title="up to &quot;3 Builtins and Libraries&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Internals.html" title="forward to &quot;4 Internals&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>3.22<tt>&nbsp;</tt><a name="(part._tables)"></a>Tables</h4><p>Tables consist of a sequence of zero or more <span style="font-style: italic">rows</span>, which each
  contain an equal amount of entries in named <span style="font-style: italic">columns</span>.</p><h5>3.22.1<tt>&nbsp;</tt><a name="(part._s~3atables)"></a>Creating Tables</h5><p>Tables are created with a <span class="pyret-highlight"><span class="stt">table:</span></span> expression, which lists any number of
columns, with optional annotations, and then any number of rows.  For example,
this expression creates a table with three columns, <span class="pyret-highlight"><span class="stt">name</span></span>, <span class="pyret-highlight"><span class="stt">age</span></span>,
and <span class="pyret-highlight"><span class="stt">favorite-color</span></span>, and three rows:</p><div class="examples"><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span></div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight"><p>my-table = table: name :: String, age :: Number, favorite-color :: String
  row: "Bob", 12, "blue"
  row: "Alice", 17, "green"
  row: "Eve", 13, "red"
end</p></pre></pre></div></p></div><p>Note that <span class="pyret-highlight"><span class="stt">my-table</span></span> is referred to in many of the following examples.</p><h5>3.22.2<tt>&nbsp;</tt><a name="(part._s~3atables~3aloading)"></a>Loading Tables</h5><p>Table loading expressions allow for the importing of tables from the
outside world into Pyret. Currently, only Google Sheets is supported.
In addition to data sources, the notion of <span style="font-style: italic">sanitizers</span> is used. These
are used to properly load each entry of the table as the correct type;
for example, the <span class="pyret-highlight"><span class="stt">string-sanitizer</span></span> in the <span class="stt">data-source</span> module
causes each item in its column to be loaded as a string (if it is not a
string, it is first converted to one). This is illustrated by the following
example:</p><div class="examples"><p><div class="SIntrapara"><span style="font-weight: bold">Examples:</span></div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight"><p>import data-source as DS
import gdrive-sheets as GS
music-ssheet = GS.load-spreadsheet("&lt;some-spreadsheet-id&gt;")

music = load-table: artist :: String, title :: String, year, sales :: Number
  source: music-ssheet.sheet-by-name("Sales", false)
  sanitize artist using DS.string-sanitizer
  sanitize title using DS.string-sanitizer
  sanitize year using DS.strict-num-sanitizer
  sanitize sales using DS.strict-num-sanitizer
end</p></pre></pre></div></p></div><p>In general, it is <span style="font-style: italic">safest</span> to sanitize <span style="font-style: italic">every</span> input column, since it
is the only way to guarantee that the data source will not guess the column&rsquo;s
type incorrectly.</p><p>Data sources are currently an internal concept to Pyret, so no public
interface for creating them is supported.</p><p>While the <span class="stt">data-source</span> library provides sanitizers which should cover
most use cases, there may be times when one would like to create a custom
data sanitizer. To do so, one must simply create a function which conforms
to the <span class="pyret-highlight"><span class="stt">Sanitizer&lt;A,B&gt;</span></span> type in the <span class="stt">data-source</span> module.</p><h5>3.22.3<tt>&nbsp;</tt><a name="(part._s~3atables~3aselect)"></a>Selecting Columns</h5><p>The <span class="pyret-highlight"><span class="stt">select</span></span> expression can be used to create a new table from a subset
of the columns of an existing one.  For example, we can get just the names
and ages from <span class="pyret-highlight"><span class="stt">my-table</span></span> above:</p><pre class="pyret-block"><pre class="pyret-highlight"><p>names-and-ages = select name, age from my-table end
check:
  names-and-ages is table: name, age
    row: "Bob", 12
    row: "Alice", 17
    row: "Eve", 13
  end
end</p></pre></pre><h5>3.22.4<tt>&nbsp;</tt><a name="(part._.Filtering_.Tables)"></a>Filtering Tables</h5><p>The <span class="pyret-highlight"><span class="stt">sieve</span></span> mechanism allows for filtering out rows of tables based
on some criteria. The <span class="pyret-highlight"><span class="stt">using</span></span> keyword specifies which columns may be
used in the body of the <span class="pyret-highlight"><span class="stt">sieve</span></span> expression.</p><p>For instance, we can find the individuals in <span class="pyret-highlight"><span class="stt">my-table</span></span> who are old
enough to drive in the United States.</p><pre class="pyret-block"><pre class="pyret-highlight good-ex"><p>can-drive = sieve my-table using age:
  age &gt;= 16
end
check:
  can-drive is table: name, age
    row: "Alice", 17
  end
end</p></pre></pre><p>Note that the <span class="pyret-highlight"><span class="stt">sieve</span></span> block must explicitly list the columns used to
filter out values with <span class="stt">using</span>.  The following would signal an undefined
name error for <span class="pyret-highlight"><span class="stt">age</span></span>, because names being used in the expression body
must be listed:</p><pre class="pyret-block"><pre class="pyret-highlight bad-ex"><p>can-drive = sieve my-table using name:
  # age is not visible inside of this expression
  age &gt;= 16
end</p></pre></pre><h5>3.22.5<tt>&nbsp;</tt><a name="(part._.Ordering_.Tables)"></a>Ordering Tables</h5><p>Since a table consists of a sequence of rows, one may desire to arrange
those rows in some particular order. This can be done with any column whose
type supports the use of <span class="pyret-highlight"><span class="stt">&lt;</span></span> and <span class="pyret-highlight"><span class="stt">&gt;</span></span> by using an <span class="pyret-highlight"><span class="stt">order</span></span>
expression:</p><pre class="pyret-block"><pre class="pyret-highlight"><p>age-ordered = order my-table:
  age descending
end
check:
  age-ordered is table: name, age
    row: "Alice", 17
    row: "Eve", 13
    row: "Bob", 12
  end
end</p></pre></pre><h5>3.22.6<tt>&nbsp;</tt><a name="(part._.Transforming_.Tables)"></a>Transforming Tables</h5><p>The <span class="pyret-highlight"><span class="stt">transform</span></span> expression allows the changing of columns within a
table, similar to the <span class="pyret-highlight"><span class="stt">map</span></span> function over lists (and, just like
<span class="pyret-highlight"><span class="stt">map</span></span>, <span class="pyret-highlight"><span class="stt">transform</span></span> expressions do not mutate the table, but
instead return a new one).</p><p><div class="SIntrapara">Suppose we find out that <span class="pyret-highlight"><span class="stt">my-table</span></span> is wrong and everyone is actually
a year older than it says they are. We can fix our data as follows:
</div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight"><p>age-fixed = update my-table using age:
  age: age + 1
end
check:
  age-fixed is table: name, age
    row: "Bob", 13
    row: "Alice", 18
    row: "Eve", 14
  end
end</p></pre></pre></div></p><h5>3.22.7<tt>&nbsp;</tt><a name="(part._.Extracting_.Columns_from_.Tables)"></a>Extracting Columns from Tables</h5><p>A large number of Pyret modules work on lists instead of tables, so it
may be desired to pull the contents of one column of a table as a list to
use it elsewhere. The <span class="pyret-highlight"><span class="stt">extract</span></span> mechanism allows this ability, and
serves as the primary "link" between processing tabular data and non-tabular
Pyret functions.</p><p><div class="SIntrapara">Suppose, for example, we wanted just the names of each person in
<span class="pyret-highlight"><span class="stt">my-table</span></span>. We could pull those names out as follows:
</div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight"><p>name-list = select name from my-table end
check:
  name-list is [list: "Bob", "Alice", "Eve"]
end</p></pre></pre></div></p><h5>3.22.8<tt>&nbsp;</tt><a name="(part._.Extending_.Tables)"></a>Extending Tables</h5><p><div class="SIntrapara">There are two types of extensions which can be made to tables: "mapping" and
"reducing" columns. A "mapping" column is one whose contents depend only on
the row it is being added to. An example of this would be a column which tells
whether the <span class="pyret-highlight"><span class="stt">age</span></span> field of a given row in <span class="pyret-highlight"><span class="stt">my-table</span></span> indicates
that the person in that row can drive in the United States or not (i.e.
whether that person is at least 16):
</div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight"><p>can-drive-col = extend my-table using age:
  can-drive: age &gt;= 16
end
check:
  can-drive-col is table: name, age, can-drive
    row: "Bob", 12, false
    row: "Alice", 17, true
    row: "Eve", 13, false
  end
end</p></pre></pre></div></p><p>Note that just like in <a href="Expressions.html#%28part._s~3atables~3atransform%29" data-pltdoc="x"><span class="pyret-highlight"><span class="stt">transform</span></span></a>, it
is required to specify which columns will be used in the body of the
<span class="pyret-highlight"><span class="stt">extend</span></span> expression using the <span class="pyret-highlight"><span class="stt">using</span></span> keyword.</p><p><div class="SIntrapara">Conversely, a "reducing" column is one whose information is computed from the
row it is being added to <span style="font-style: italic">and the rows above that row</span>. For example, given
<span class="pyret-highlight"><span class="stt">can-drive-col</span></span> from the previous example, suppose we would like to
keep a running total of how many people are able to drive. Importing the
<span class="stt">tables</span> module allows us to do this:
</div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight"><p>import tables as TS
num-can-drive-col = extend my-table using can-drive:
  num-can-drive: TS.running-fold({(acc, cur): acc + (if cur: 1 else: 0 end)})
end
check:
  num-can-drive-col = table: name, age, can-drive, num-can-drive
    row: "Bob", 12, false, 0
    row: "Alice", 17, true, 1
    row: "Eve", 13, false, 1
  end
end</p></pre></pre></div></p><p>While the reducers found in the <span class="stt">tables</span> module should cover most all
use cases, there may be times when one would like to create a reducer of their
own. To do so, one must construct an object of the following type:</p><div class="boxed"><a name="(part._tables_.Reducer)" class="pyret-code"></a><a href="#%28part._tables_.Reducer%29" data-pltdoc="x"><span class="stt">Reducer</span></a><span class="stt">&lt;Acc,InVal,OutVal&gt;</span></div><div class="function"><div class="boxed pyret-header"><a name="(part._tables_.Reducer_one)" class="pyret-code"></a><span class="stt">.one</span><span class="stt"> :: </span><span class="stt">(</span><span class="stt">value-from-column :: InVal</span><span class="stt">) -&gt; {Acc; OutVal}</span></div><div class="description"></div><div class="examples"></div></div><div class="function"><div class="boxed pyret-header"><a name="(part._tables_.Reducer_reduce)" class="pyret-code"></a><span class="stt">.reduce</span><span class="stt"> :: </span><span class="stt">(</span><span class="stt">accumulator :: Acc</span>, <span class="stt">value-from-column :: InVal</span><span class="stt">) -&gt; {Acc; OutVal}</span></div><div class="description"></div><div class="examples"></div></div><p>Reducers are essentially descriptions of folds (in the list <span class="pyret-highlight"><span class="stt">fold</span></span>
sense) over table columns. The way reducers are called by the language
runtime is as follows: the value(s) from the first row are passed to the
reducer&rsquo;s <span class="pyret-highlight"><span class="stt">.one</span></span> method, which should return a tuple containing both
any accumulated information needed for the fold and the value which should
be placed in the new column in that row. The remaining rows are then
sequentially populated using the reducer&rsquo;s <span class="pyret-highlight"><span class="stt">.reduce</span></span> method, which is
identical to the <span class="pyret-highlight"><span class="stt">.one</span></span> method except that it receives an additional
argument which is the previously mentioned accumulated information from the
previous row.</p><p><div class="SIntrapara">To illustrate, a <span class="pyret-highlight"><span class="stt">running-mean</span></span> reducer which is equivalent to the
one provided by the <span class="stt">tables</span> module could be implemented as follows:
</div><div class="SIntrapara"><pre class="pyret-block"><pre class="pyret-highlight"><p>import tables as TS
running-mean :: TS.Reducer&lt;{Number; Number}, Number, Number&gt; = {
  one: lam(n): {{n; 1}; n} end,
  reduce: lam({sum; count}, n):
    { {sum + n; count + 1}; (sum + n) / (count + 1) }
  end
}</p></pre></pre></div></p><h5>3.22.8.1<tt>&nbsp;</tt><a name="(part._.Reducers)"></a>Reducers</h5><p>The following reducers are provided:</p><div class="value"><div class="boxed pyret-header"><a name="(part._tables_running-mean)" class="pyret-code"></a><a href="#%28part._tables_running-mean%29" data-pltdoc="x"><span class="stt">running-mean</span></a><span class="stt"> :: </span><a href="#%28part._tables_.Reducer%29" data-pltdoc="x"><span class="stt">Reducer</span></a>&lt;<a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>, <a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>, <a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>&gt;</div><div class="description"></div></div><div class="function"><div class="boxed pyret-header"><a name="(part._tables_difference-from)" class="pyret-code"></a><a href="#%28part._tables_difference-from%29" data-pltdoc="x"><span class="stt">difference-from</span></a><span class="stt"> :: </span><span class="stt">(</span><span class="stt">start-value</span><span class="stt"> :: </span><a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a><span class="stt">)</span><span class="stt"> -&gt; </span><a href="#%28part._tables_.Reducer%29" data-pltdoc="x"><span class="stt">Reducer</span></a><span class="stt">&lt;</span><a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a><span class="stt">, </span><a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a><span class="stt">, </span><a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a><span class="stt">&gt;</span></div><div class="description"></div><div class="examples"></div></div><div class="function"><div class="boxed pyret-header"><a name="(part._tables_running-fold)" class="pyret-code"></a><a href="#%28part._tables_running-fold%29" data-pltdoc="x"><span class="stt">running-fold</span></a><span class="stt"> :: </span><span class="stt">(</span><span class="stt">start-value :: (a, a -&gt; a)</span><span class="stt">)</span><span class="stt"> -&gt; </span><a href="#%28part._tables_.Reducer%29" data-pltdoc="x"><span class="stt">Reducer</span></a><span class="stt">&lt;</span><span class="stt">a</span><span class="stt">, </span><span class="stt">a</span><span class="stt">, </span><span class="stt">a</span><span class="stt">&gt;</span></div><div class="description"></div><div class="examples"></div></div><div class="value"><div class="boxed pyret-header"><a name="(part._tables_difference)" class="pyret-code"></a><a href="#%28part._tables_difference%29" data-pltdoc="x"><span class="stt">difference</span></a><span class="stt"> :: </span><a href="#%28part._tables_.Reducer%29" data-pltdoc="x"><span class="stt">Reducer</span></a>&lt;<a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>, <a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>, <a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>&gt;</div><div class="description"></div></div><div class="value"><div class="boxed pyret-header"><a name="(part._tables_running-max)" class="pyret-code"></a><a href="#%28part._tables_running-max%29" data-pltdoc="x"><span class="stt">running-max</span></a><span class="stt"> :: </span><a href="#%28part._tables_.Reducer%29" data-pltdoc="x"><span class="stt">Reducer</span></a>&lt;<a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>, <a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>, <a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>&gt;</div><div class="description"></div></div><div class="value"><div class="boxed pyret-header"><a name="(part._tables_running-min)" class="pyret-code"></a><a href="#%28part._tables_running-min%29" data-pltdoc="x"><span class="stt">running-min</span></a><span class="stt"> :: </span><a href="#%28part._tables_.Reducer%29" data-pltdoc="x"><span class="stt">Reducer</span></a>&lt;<a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>, <a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>, <a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>&gt;</div><div class="description"></div></div><div class="value"><div class="boxed pyret-header"><a name="(part._tables_running-sum)" class="pyret-code"></a><a href="#%28part._tables_running-sum%29" data-pltdoc="x"><span class="stt">running-sum</span></a><span class="stt"> :: </span><a href="#%28part._tables_.Reducer%29" data-pltdoc="x"><span class="stt">Reducer</span></a>&lt;<a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>, <a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>, <a href="_global_.html#%28part._~3cglobal~3e_.Number%29" data-pltdoc="x"><span class="stt">Number</span></a>&gt;</div><div class="description"></div></div><h5>3.22.9<tt>&nbsp;</tt><a name="(part._s~3atables~3acomparing)"></a>Comparing Tables</h5><p>The order of both rows and columns are part of a table value.  To be considered
equal, tables need to have all the same rows and columns, with the rows and
columns appearing in the same order.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="plot.html" title="backward to &quot;3.21 plot&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Builtins_and_Libraries.html" title="up to &quot;3 Builtins and Libraries&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Internals.html" title="forward to &quot;4 Internals&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>